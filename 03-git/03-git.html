<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>📼 teaching computing with Git &amp; GitHub</title>
    <meta charset="utf-8" />
    <meta name="author" content="    dr. mine çetinkaya-rundel   dr. colin rundel" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="slides-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# 📼 teaching computing with Git &amp; GitHub
## <br> 🔗 <a href="https://bit.ly/teach-r-online-mats">bit.ly/teach-r-online-mats</a>
### <br> <br> dr. mine çetinkaya-rundel <br> dr. colin rundel

---





layout: true
  
&lt;div class="my-footer"&gt;
&lt;span&gt;
&lt;a href="https://bit.ly/teach-r-online-mats" target="_blank"&gt;&lt;b&gt;bit.ly/teach-r-online-mats&lt;/b&gt;&lt;/a&gt; - Dr. Mine Çetinkaya-Rundel &amp; Dr. Colin Rundel
&lt;/span&gt;
&lt;/div&gt; 

---




```r
library(ghclass)
```










## Activity 

**to do: needs to be updated**

.hand[while we wait to get started...]

- Go to [gallery.shinyapps.io/lego-sales](https://gallery.shinyapps.io/lego-sales/)
- Start working through the tutorial
- Feel free to make mistakes and test out the feedback
- If you get to the very end, follow the instructions (but if they seem a bit opaque, don't fret, we'll say more about "submission" later...)

---

.huge-text[you...]

.large[
- are familiar with R
- are familiar with git and GitHub
- are interested in teaching version control
- are interested in using GitHub as your learning management system
- might be interested in automation tools offered by GitHub for auto feedback
]

---

class: middle, inverse

.pull-left[
  .huge-text[why]
]
.pull-right[
  .larger[
  git &amp;    
  github
  ]
]

---

- **Version control:** mistakes are inevitable, need ability to revert

- **Collaboration:** Platform that removes barriers to well documented collaboration

- **Accountability:** Transparent commit history

- **Early introduction:** 
  - Mastery takes time, earlier the better
  - Portfolios &amp; Marketability

---

## Goals for version control with Git / GitHub

- Centralize the distribution and collection of all student assignments

- Enable students to work collaboratively

- Force students to use (learn) git &amp; GitHub
  - Version control is a best practice for reproducible research
  - Widely used in industry 
  - Publish / share work
  
---

class: middle, inverse

.huge-text[github]  
.larger[as your LMS]

---

## Basic Structure

On Github

- 1 Organization / class

- 1 repo / (student or team) / assignment

- Student and team repos are all private by default

- Students are added to org as members (membership is not public by default)

- Tutors / TAs are added to org as admins / owners

---

## Basic Workflows

1. Create organization

1. Invite students

1. Create assignment(s)

1. Collect and or grade assignments(s) 


---

## Create course organization

.center[
https://github.com/organizations/new
]

&lt;img src="img/org-create.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Create course organization

&lt;img src="img/org-create2.png" width="60%" style="display: block; margin: auto;" /&gt;


---

## Education discount

While no longer required, GitHub offers a number of education benefits which you can register for here: https://education.github.com/benefits.

Of particular note are:

- Free GitHub swag here
  - https://education.github.com/toolbox/offers#github_swag

- Free Team plans for academic organizations and Pro plan for educators
  - https://education.github.com/toolbox/offers#github

---

## Org Setup

&lt;img src="img/org-people.png" width="90%" style="display: block; margin: auto;" /&gt;

---

## Member Privileges

&lt;img src="img/member-priv.png" width="683" /&gt;

---

## Invite students

&lt;img src="img/org-invite.png" width="90%" style="display: block; margin: auto;" /&gt;

--

.center[ .large[
.hand[ x 150 students ... ]
] ]

---

class: middle

.hand[ at this scale, doing anything with the GitHub UI starts to get quite tedious... ]




---



---

class: middle, inverse

.huge-text[📦 ghclass]

---

## 📦 ghclass

- Design to automate interactions with GitHub (via its API) for class management

- The package is ~4 years old and still under active development

- Detailed introduction and documentation available on the package website: http://rundel.github.io/ghclass

- The package is not on CRAN (but will be imminently), for now it can be installed from GitHub using:


```r
devtools::install_github("rundel/ghclass")
```


```r
library(ghclass)
```

---

## 📦 design

Some design principals behind this package:

1. All of the package's functions are prefixed with either `org`, `repo`, `team`, `github` or `local_repo` to indicate what they operate on.

2. Most functions are vectorized over their parameters, allows related operations to be grouped.

3. Most actions are non-destructive and/or backed by git, the handful of dangerous operations will warn you.


---

## Aside - GitHub tokens

`ghclass` uses the GitHub API to interact with your organization and repos - the API verifies your identity using a personal access token which must be created and saved in such a way that `ghclass` can find and use it.

- Create a token at [github.com/settings/tokens](https://github.com/settings/tokens) 

- Once created, assign it to the `GITHUB_TOKEN` as an environmental variable in R by,
  
  - Run `usethis::edit_r_environ()`
  
  - Add `GITHUB_PAT="alphanumeric string of your GitHub token"` to the opened `.Renviron` file.
  
  - Save, close, restart R for changes to take effect

---

## Checking tokens

If the token is found and works correctly the following code should run without error


```r
github_test_token()
```

```
## ✓ Your GitHub PAT authenticated correctly.
```

If instead the token is invalid or not found, you will see something like the following

```r
github_test_token("BAD_TOKEN")
```

```
## x Your GitHub PAT failed to authenticate.
## └─GitHub API error (401): 401 Unauthorized
##   ├─ API message: Bad credentials
##   └─ API docs: https://developer.github.com/v3
```

---

## Invite students

- Collect student account names (and an email or other identifier)






```r
roster
```

```
## # A tibble: 6 x 2
##   email              github         
##   &lt;chr&gt;              &lt;chr&gt;          
## 1 anya@school.edu    ghclass-anya   
## 2 bruno@school.edu   ghclass-bruno  
## 3 celine@school.edu  ghclass-celine 
## 4 diego@school.edu   ghclass-diego  
## 5 elijah@school.edu  ghclass-elijah 
## 6 francis@school.edu ghclass-francis
```



```r
org_invite(org = "ghclass-demo", user = roster$github)
```

```
## ✓ Invited user 'ghclass-anya' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-bruno' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-celine' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-diego' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-elijah' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-francis' to org 'ghclass-demo'.
```

- Instruct students to check their email and follow the instructions.

- If you filled out the form earlier you may already have an invite to `ghclass-demo`.

---

## Check member status

Who is already in?


```r
org_members(org = "ghclass-demo")
```

```
## [1] "mine-cetinkaya-rundel" "rundel"                "thereseanders"
```

Who has not accepted their invitation?


```r
org_pending(org = "ghclass-demo")
```

```
## [1] "ghclass-anya"    "ghclass-bruno"   "ghclass-diego"   "ghclass-elijah" 
## [5] "ghclass-francis" "ghclass-celine"
```

---

class: middle

# Creating assignments

---

## Starter repo

All assignments are just repositories on GitHub

- each is made up of a collection of files necessary for that assignment (e.g. README, templated Rmd, Rproj file, etc.)

- repos can be public or private and belong to any org

- easy to recycle and update previous assignments

&lt;img src="img/starter-repo.png" width="50%" style="display: block; margin: auto;" /&gt;

---

## Creating your starter repo

&lt;br&gt;

&lt;img src="img/starter-repo-create.png" width="474" /&gt;

---

## Make your starter repo a template

&lt;br&gt;

&lt;img src="img/starter-repo-make-template.png" width="653" /&gt;

---

## Prepare your starter repo

- Clone it locally
- Add any necessary files
- Commit and push

&lt;br&gt;

[DEMO]

---

## Create assignments


```r
org_create_assignment(
  org = org,
  repo = paste0("hw-01-airbnb-edi-", roster$username),
  user = roster$username,
  source_repo = paste0(org, "/hw-01-airbnb-edi")
)
```

&lt;br&gt;

[DEMO]

---

.your-turn[
- Go to the course organisation on GitHub: [github.com/design-ds-class](https://github.com/design-ds-class)
- Locate your HW 01 and read through the Getting started section and follow the instructions.
- Then, go through the Hello Git and Warm up sections as well.
- Finally, add your answer to Question 1, and commit and push again.
]

- If there is no GitHub repo created for you for this assignment, let me know.
- Clone using the HTTPS link, and let me know if   
you have 2-factor authentication enabled on  
GitHub (this complicates things!)

<div class="countdown" id="timer_5f10c2bb" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>


---

## Options for giving feedback on GitHub

- Use the GitHub UI to add issues to each student's repo

- Clone student repos locally and reproduce their work prior to giving feedback by adding issues on the GitHub UI


```r
hw01_repos &lt;- org_repos(org, "hw-01-airbnb-edi-")
local_repo_clone(hw01_repos, 
                 local_path = "hw01_submissions")
```

- Use the `issue_create()` function to post issues to all repos at once
  - Add a column for the repo name in `org/repo` format to roster
  - Add a column for feedback
  - [DEMO]
             
---

## Get big picture stats for an assignment


```r
org_repo_stats(org, filter = "hw-01-airbnb-edi-")
```

&lt;br&gt;

[DEMO]

---

## Create team assignments

First, we'll make up some teams


```r
org_create_assignment(
  org = org,
  repo = paste0("lab-03-nobel-laureates-", roster$team_name),
  user = roster$github_name,
  team = roster$team_name,
  source_repo = paste0(org, "/lab-03-nobel-laureates")
)
```

&lt;br&gt;

[DEMO]

---

.your-turn[
- Go to the course organisation on GitHub: [github.com/design-ds-class](https://github.com/design-ds-class)
- Locate your Lab 03 and read through the Getting started section and follow the instructions with your team members.
]

<div class="countdown" id="timer_5f10c189" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---

class: middle, inverse

# Giving feedback

---

## More on giving feedback in issues

- Instructors (and TAs) can view all repositories within the course organization.
- Use specific line references. [DEMO]
- Make sure to `@` mention the student so that they are notified when an issue is opened.
- You might want to consider keeping points out of issues.

---

## Peer review

- Once an assignment is completed you can let other students/teams into a repository and they can provide peer review.

- Peer review is an incredibly effective learning experience for both the reviewers and the reviewees, however it does require coordination and being able to carve out sufficient time in the course schedule.

- Tip: Do not solely count on peer review for feedback as some reviewers might be less diligent than others. Teams reviewing teams, as opposed to individual reviewing individuals, might address this issue partially.

See the [Peer review with ghclass vignette](https://rundel.github.io/ghclass/articles/peer.html) for more.

---

## Pull requests

- Another option is to open pull requests for your students' work where you directly edit their work and ask them to approve the edits.

- This can be effective as students will see your corrections and review them before accepting them.

- However this also does mean that you're directly correcting their work as opposed to giving them higher level instructions on how to correct it.

More on this in the next module...

---

.your-turn[
**Now you're the instructor:**

- First, I'll change everyone's permission level and make you *Owner*s. (Please don't delete any repos!)
- Go to the GitHub organization for our "class" and observe that now you can see all repos.
- Go into the individual repo (HW 01) for your neighbor. Open an issue and add some text to the issue. In the issue `@` mention their username. Submit your issue.

**Now you're a student:**
Check your email to confirm that you got notified of an issue being filed by your neighbor  
in your repo, and review the issue.
]

<div class="countdown" id="timer_5f10c4b1" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---

## Git + GitHub lessons learned

- If you plan on using git in class, start on day one, don’t wait until the “right time”
- First assignment should be individual, not team based to avoid merge conflicts
- Students need to remember to pull before starting work
- Impossible (?) to avoid shell intervention every once in a while
- Remind students on that future projects should go on GitHub with PI approval

---

.hand-large[thank you!]

All materials at [bit.ly/teach-r-online-mats](https://bit.ly/teach-r-online-mats)









---

## Collect data from students

- You really only need GitHub usernames

- Recommend also collecting emails though, as students might make a typo in their GitHub username

---

## Prior to collecting data...

You need to instruct students to create GitHub accounts

- Consider data privacy rules of institution / country (e.g. you may need to enter a data protection agreement for GDPR compliance)

- Give some guidance for selecting usernames (my favorite is on Happy Git with R: [happygitwithr.com/github-acct.html](https://happygitwithr.com/github-acct.html))
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">   <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">   </div> </div>"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
