<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>📼 teaching computing with Git &amp; GitHub</title>
    <meta charset="utf-8" />
    <meta name="author" content="    dr. mine çetinkaya-rundel   dr. colin rundel" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="slides-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# 📼 teaching computing with Git &amp; GitHub
## <br> 🔗 <a href="https://bit.ly/teach-r-online-mats">bit.ly/teach-r-online-mats</a>
### <br> <br> dr. mine çetinkaya-rundel <br> dr. colin rundel

---





layout: true
  
&lt;div class="my-footer"&gt;
&lt;span&gt;
&lt;a href="https://bit.ly/teach-r-online-mats" target="_blank"&gt;&lt;b&gt;bit.ly/teach-r-online-mats&lt;/b&gt;&lt;/a&gt; - Dr. Mine Çetinkaya-Rundel &amp; Dr. Colin Rundel
&lt;/span&gt;
&lt;/div&gt; 

---


```r
knitr::opts_chunk$set(cache = TRUE)
```













## Activity 

**to do: needs to be updated**

.hand[while we wait to get started...]

- Go to [bit.ly/gh-username](https://bit.ly/gh-username)
- Enter your GitHub username

---

.huge-text[you...]

.large[
- are familiar with R
- are familiar with git and GitHub
- are interested in teaching version control
- are interested in using GitHub as your learning management system
- might be interested in automation tools offered by GitHub for auto feedback
]

---

class: middle, inverse

.pull-left[
  .huge-text[why]
]
.pull-right[
  .larger[
  git &amp;    
  github
  ]
]

---

## Goals for version control with Git / GitHub

- Centralize the distribution and collection of all student assignments

- Enable students to work collaboratively

- Force students to use (learn) git &amp; GitHub
  - Version control is a best practice for reproducible research
  - Widely used in industry 
  - Publish / share work

---

class: middle, inverse

.huge-text[github]  
.larger[as a student]


---
class: middle

.center[
&lt;iframe width="900" height="500" src="https://www.youtube.com/embed/zaoSeyHARGM?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;
]

---

class: middle

.center[
&lt;iframe width="900" height="500" src="https://www.youtube-nocookie.com/embed/5wKdo2XJMeU?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;
]


---

.your-turn[
*We recommend one person in each group share their screen and everyone work together to work through the document.*

- Accept the invitation, 

- Obtain the *https* git url from the GitHub repository

- Open RStudio Cloud and start a new project with this url

- Work through Task 0 in the README

&lt;br/&gt;

If you did not receive an invite you can make your own copy of the repo using the *Use this template* button here: https://github.com/rundel/hw1
]


<div class="countdown" id="timer_5f10ea1c" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---

class: middle, inverse

.huge-text[github]  
.larger[as an instructor]

---

## Basic Structure

On Github,

- 1 Organization / class

- 1 repo / (student or team) / assignment

- Student and team repos are all private by default

- Students are added as members

- Tutors / TAs are added as owners (admins)

---

## Basic Workflows

1. Create organization

1. Invite students

1. Create assignment(s)

1. Collect and grade assignments(s) 


---

## Create course organization

.center[
https://github.com/organizations/new
]

&lt;img src="img/org-create.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Create course organization

&lt;img src="img/org-create2.png" width="60%" style="display: block; margin: auto;" /&gt;


---

## Education discount

While no longer required, GitHub offers a number of education benefits which you can register for here: https://education.github.com/benefits.

Of particular note are:

- Free GitHub swag here
  - https://education.github.com/toolbox/offers#github_swag

- Free Team plans for academic organizations and Pro plan for educators
  - https://education.github.com/toolbox/offers#github

---

## Org Setup

&lt;img src="img/org-people.png" width="90%" style="display: block; margin: auto;" /&gt;

---

## Member Privileges

&lt;img src="img/member-priv.png" width="683" /&gt;

---

## Invite students

&lt;img src="img/org-invite.png" width="90%" style="display: block; margin: auto;" /&gt;

--

.center[ .large[
.hand[ x 150 students ... ]
] ]

---

class: middle

.hand[ at this scale, doing anything with the GitHub UI starts to get quite tedious... ]

---

class: middle, inverse

.huge-text[📦 ghclass]

---

## 📦 ghclass

- Design to automate interactions with GitHub (via its API) for class management

- The package is ~4 years old and still under active development

- Detailed introduction and documentation available on the package website: http://rundel.github.io/ghclass

- The package is not on CRAN (but will be imminently), for now it can be installed from GitHub using:


```r
devtools::install_github("rundel/ghclass")
library(ghclass)
```

---

## 📦 design

Some design principals behind the package:

1. All functions are prefixed to indicate what they operate on (e.g.  `org`, `repo`, `team`, `local_repo`, etc.)

2. Most functions are vectorized over their parameters, allowing related operations to be grouped

3. Most actions are non-destructive or backed by git, the handful of dangerous operations will warn you


---

## Aside - GitHub tokens

`ghclass` uses the GitHub API to interact with your organization and repos - the API verifies your identity using a personal access token which must be created and saved in such a way that `ghclass` can find and use it.

- Create a token at [github.com/settings/tokens](https://github.com/settings/tokens) 

- Once created, assign it to the `GITHUB_TOKEN` as an environmental variable in R by,
  
  - Run `usethis::edit_r_environ()`
  
  - Add `GITHUB_PAT="alphanumeric string of your GitHub token"` to the opened `.Renviron` file.
  
  - Save, close, restart R for changes to take effect

---

## Checking tokens

If the token is found and works correctly the following code should run without error


```r
github_test_token()
```

```
## ✓ Your GitHub PAT authenticated correctly.
```

If instead the token is invalid or not found, you will see something like the following

```r
github_test_token("BAD_TOKEN")
```

```
## x Your GitHub PAT failed to authenticate.
## └─GitHub API error (401): 401 Unauthorized
##   ├─ API message: Bad credentials
##   └─ API docs: https://developer.github.com/v3
```

---

## Invite students

- Collect student account names (and an email or other identifier)


```r
students = c("ghclass-anya", "ghclass-bruno", "ghclass-celine", "ghclass-diego")
```


```r
org_invite(org = "ghclass-demo", user = students)
```

```
## ✓ Invited user 'ghclass-anya' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-bruno' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-celine' to org 'ghclass-demo'.
```

```
## ✓ Invited user 'ghclass-diego' to org 'ghclass-demo'.
```

---

## Check member status

Who is already in?


```r
org_members(org = "ghclass-demo")
```

```
## [1] "mine-cetinkaya-rundel" "rundel"                "thereseanders"
```

Who has not accepted their invitation?


```r
org_pending(org = "ghclass-demo")
```

```
## [1] "ghclass-anya"   "ghclass-bruno"  "ghclass-diego"  "ghclass-celine"
```

---

class: middle

# Creating assignments

---

## Starter repo

All assignments are just repositories on GitHub

- each is made up of a collection of files necessary for that assignment (e.g. README, templated Rmd, Rproj file, etc.)

- repos can be public or private and belong to any org

&lt;img src="img/starter-repo.png" width="50%" style="display: block; margin: auto;" /&gt;

---

## Template Repos

&lt;img src="img/template-repo.png" width="80%" style="display: block; margin: auto;" /&gt;


```r
repo_set_template("rundel/hw1")
```

```
## ✓ Changed the template status of repo 'rundel/hw1' to TRUE.
```

```r
repo_is_template("rundel/hw1")
```

```
## [1] TRUE
```


---

## Create assignments


```r
org_create_assignment(
  org = "ghclass-demo",
  repo = paste0("hw01-", students),
  user = students,
  source_repo = "rundel/hw1"
)
```

```
## ✓ Mirrored repo 'rundel/hw1' to repo 'ghclass-demo/hw01-ghclass-anya'.
```

```
## ✓ Mirrored repo 'rundel/hw1' to repo 'ghclass-demo/hw01-ghclass-bruno'.
```

```
## ✓ Mirrored repo 'rundel/hw1' to repo 'ghclass-demo/hw01-ghclass-celine'.
```

```
## ✓ Mirrored repo 'rundel/hw1' to repo 'ghclass-demo/hw01-ghclass-diego'.
```

```
## ✓ Added user 'ghclass-anya' to repo 'ghclass-demo/hw01-ghclass-anya'.
```

```
## ✓ Added user 'ghclass-bruno' to repo 'ghclass-demo/hw01-ghclass-bruno'.
```

```
## ✓ Added user 'ghclass-celine' to repo 'ghclass-demo/hw01-ghclass-celine'.
```

```
## ✓ Added user 'ghclass-diego' to repo 'ghclass-demo/hw01-ghclass-diego'.
```

---

## Create team assignments


```r
students = c("ghclass-anya", "ghclass-bruno", "ghclass-celine", "ghclass-diego")
teams = c("hw01-team01", "hw01-team01", "hw01-team02", "hw01-team02")

org_create_assignment(
  org = "ghclass-demo",
  repo = teams,
  team = teams,
  user = students,
  source_repo = "rundel/hw1"
)
```

```
## ✓ Mirrored repo 'rundel/hw1' to repo 'ghclass-demo/hw01-team01'.
```

```
## ✓ Mirrored repo 'rundel/hw1' to repo 'ghclass-demo/hw01-team02'.
```

```
## ✓ Created team 'hw01-team01' in org 'ghclass-demo'.
```

```
## ✓ Created team 'hw01-team02' in org 'ghclass-demo'.
```

```
## ✓ Added user 'ghclass-anya' to team 'hw01-team01'.
```

```
## ✓ Added user 'ghclass-bruno' to team 'hw01-team01'.
```

```
## ✓ Added user 'ghclass-celine' to team 'hw01-team02'.
```

```
## ✓ Added user 'ghclass-diego' to team 'hw01-team02'.
```

```
## ✓ Added team 'hw01-team01' to repo 'ghclass-demo/hw01-team01' with 'push' access.
```

```
## ✓ Added team 'hw01-team02' to repo 'ghclass-demo/hw01-team02' with 'push' access.
```

---

## Fixing mistakes


```r
repo_modify_file(
  repo = org_repos("ghclass-demo", "hw01-"),
  path = "README.md",
  pattern = "Due 20/00/00 by 5:00 pm",
  content = "Due 2020/07/17 by 5:00 pm",
  method = "replace"
)
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-anya/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-bruno/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-celine/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-diego/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-team01/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-team02/README.md'.
```

---


```r
repo_get_readme("ghclass-demo/hw01-team01", include_details = FALSE) %&gt;% 
  substr(1, 80) %&gt;%
  cat()
```

```
## 
## Statistical Programming - Homework 1
## -------------
## 
## Due 2020/07/17 by 5:00 pm.
```


---
class: middle

# Collecting and Grading

---

## Repo details


```r
org_repos("ghclass-demo")
```

```
## [1] "ghclass-demo/hw01-ghclass-anya"   "ghclass-demo/hw01-ghclass-bruno" 
## [3] "ghclass-demo/hw01-ghclass-celine" "ghclass-demo/hw01-ghclass-diego" 
## [5] "ghclass-demo/hw01-team01"         "ghclass-demo/hw01-team02"
```


```r
org_repo_stats("ghclass-demo")
```

```
## Warning: This function ('org_repo_stats') is currently considered experimental.
## Its interface, implementation, and other features may change significantly in
## future versions of the package. Use with caution.
```

```
## # A tibble: 6 x 9
##   repo  private commits last_update         open_issues closed_issues open_prs
##   &lt;chr&gt; &lt;lgl&gt;     &lt;int&gt; &lt;dttm&gt;                    &lt;int&gt;         &lt;int&gt;    &lt;int&gt;
## 1 ghcl… TRUE          2 2020-07-16 23:52:45           0             0        0
## 2 ghcl… TRUE          2 2020-07-16 23:52:43           0             0        0
## 3 ghcl… TRUE          2 2020-07-16 23:52:41           0             0        0
## 4 ghcl… TRUE          2 2020-07-16 23:52:40           0             0        0
## 5 ghcl… TRUE          2 2020-07-16 23:52:35           0             0        0
## 6 ghcl… TRUE          2 2020-07-16 23:52:46           0             0        0
## # … with 2 more variables: merged_prs &lt;int&gt;, closed_prs &lt;int&gt;
```

---


```r
repo_commits("tidyverse/dplyr") %&gt;%
  count(login, sort = TRUE)
```

```
## # A tibble: 80 x 2
##    login                     n
##    &lt;chr&gt;                 &lt;int&gt;
##  1 romainfrancois          550
##  2 hadley                  237
##  3 lionel-                  44
##  4 DavisVaughan             41
##  5 krlmlr                   21
##  6 mine-cetinkaya-rundel    11
##  7 yutannihilation           6
##  8 batpigandme               5
##  9 earowang                  5
## 10 ianmcook                  3
## # … with 70 more rows
```

---

## Collecting


```r
local_repo_clone(org_repos("ghclass-demo", filter = "hw01-team"), local_path = "hw1/")
```

```
## ✓ Cloned 'ghclass-demo/hw01-team01'.
```

```
## ✓ Cloned 'ghclass-demo/hw01-team02'.
```


```r
fs::dir_tree("hw1/", recurse = TRUE)
```

```
## hw1/
## ├── hw01-team01
## │   ├── README.md
## │   ├── hw1.Rmd
## │   └── hw1.Rproj
## └── hw01-team02
##     ├── README.md
##     ├── hw1.Rmd
##     └── hw1.Rproj
```




---

## Options for giving feedback on GitHub

- Use the GitHub UI to add issues to each student's repo

- Use the `issue_create()` function to post issues to all repos at once

- Create pull requests with explicit revisions to student code 

- Clone repos locally and add feedback in a file, push back to GitHub

---

## More on giving feedback in issues

- Instructors (and TAs) can view all repositories within the course organization.

- Builtin tools for referencing specific commits, lines of code, etc.

- `@` mention students so that they are notified when an issue is opened.

- You may want to consider keeping grades / marks out of issues.

---

## Peer review

- Once an assignment is completed you can let other students/teams into a repository and they can provide peer review.

- Peer review is an incredibly effective learning experience for both the reviewers and the reviewees, however it does require coordination and being able to carve out sufficient time in the course schedule.

- Tip: Do not solely count on peer review for feedback as some reviewers might be less diligent than others. Teams reviewing teams, as opposed to individual reviewing individuals, might address this issue partially.

- Functionality for coordinating this has been implemented in ghclass, will be available in the next version.


---

.your-turn[
- Pick one person from the team to be the "instructor" and share their screen.
- Go to https://github.com/ghclass-demo/hw01-everyone
- Go to the issues tab, open a new issue, and provide mock feedback. Tag someone from your team by using the @ sign in front of their GitHub.
- Go to `hw1.Rmd`, pick a line of code, click on the `...` next to the numbers, click on *Reference in new issue*, and add a comment on the issue that links to this line of code.
]

<div class="countdown" id="timer_5f10e949" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---

## Automated feedback


```r
action_workflows("ghclass-demo/hw01-team01")
```

```
## # A tibble: 1 x 4
##   name          path             state badge_url                                
##   &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;                                    
## 1 Check Reprod… .github/workflo… acti… https://github.com/ghclass-demo/hw01-tea…
```

```r
action_add_badge(
  repo = org_repos("ghclass-demo", "hw01-")
)
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-anya/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-bruno/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-celine/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-ghclass-diego/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-team01/README.md'.
```

```
## ✓ Modified file 'ghclass-demo/hw01-team02/README.md'.
```

---

class: middle, inverse

.huge-text[closing]
.huge-text[thoughts]

---

## Git + GitHub lessons learned

- If you plan on using git in class, start on day one, don’t wait until the “right time”

- First assignment should be individual, not team based to avoid merge conflicts

- Remind students to remember to pull before starting work

- Unlikely you will avoid the necessity of shell intervention at some point

- Remind students on that future projects should go on GitHub with PI approval

---

.large[
.hand[Q: What about data protection regulations (FURPA, GDPR)?]
]

- Consider data privacy rules of institution / country (e.g. you may need to enter a data protection agreement for GDPR compliance)

- Make everything private by default (ghclass opts for this)
  - Private repos
  - Hidden team and org memberships
  - Disallow forking of private repos
  
---

.large[
.hand[Q: What about GitHub Classroom?]
]

This is education tool created by GitHub manage repository sharing and collection.

- It is great and very usable and they continue to improve it.

- ghclass and Classroom can work together, pick the workflow that is best for you.

---

.large[
.hand[Q: How do you introduce git and GitHub to students?]
]

- From week 1,

---

.hand-large[thank you!]

All materials at [bit.ly/teach-r-online-mats](https://bit.ly/teach-r-online-mats)






    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">   <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">   </div> </div>"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
